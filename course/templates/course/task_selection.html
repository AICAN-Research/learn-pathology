{% extends 'learnpathology/base.html' %}

{% block content %}


<p>
    Select task(s) to add to the course {{ course.code }} - {{ course.title }}
</p>


<form>
    <p>
        <b>Filter:</b>
        Organ:
        <select name="organ[]" multiple class="filter" style="width:20%">
            {% for tag in organ_tags %}
                <option value="{{ tag.id }}"{% if tag.id|slugify in selected_organ_tags %} selected="selected"{% endif %}>{{ tag.name }}</option>
            {% endfor %}
        </select>
        System:
        <select name="system[]" multiple class="filter">
            {% for tag in system_tags %}
                <option value="{{ tag.id }}"{% if tag.id|slugify in selected_system_tags %} selected="selected"{% endif %}>{{ tag.name }}</option>
            {% endfor %}
        </select>
        Tag:
        <select name="tag[]" multiple class="filter">
            {% for tag in other_tags %}
                <option value="{{ tag.id }}"{% if tag.id|slugify in selected_other_tags %} selected="selected"{% endif %}>{{ tag.name }}</option>
            {% endfor %}
        </select>
    </p>
</form>



{% if filtered_tasks %}

    <form method="post">
    {%  csrf_token %}

        <table>
            <tr>
                <th>Selection</th>
                <th>Slide</th>
                <th>Name</th>
                <th>Type</th>
                <th>Question</th>
            </tr>
        {% for task in filtered_tasks %}
            <tr>
            {% if task.id in selection %}
                <th><input type="checkbox" name="task_selection" value="{{ task.id }}" checked></th>
            {% else %}
                <th><input type="checkbox" name="task_selection" value="{{ task.id }}"></th>
            {% endif %}
                <td>
                    <a href="{% url 'slide:view_full' task.annotated_slide.slide.id %}">
                        <img src="/slide/thumbnails/{{ task.annotated_slide.slide.id }}.jpg" style="width: 100px">
                    </a>
                </td>
                <td>{{ task.name }}</td>
                <td>{{ task.type }}</td>
                <td>**question here**</td>
            </tr>
        {% endfor %}
        </table>

        <input type="submit" value="Add selected slides">
    </form>
{% else %}
    <p>
        No slides found with current filter.
    </p>
{% endif %}



{% endblock content %}
