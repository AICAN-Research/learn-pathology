{% extends 'learnpathology/single_content_layout.html' %}


{% block page_title %}
<!-- TODO: What should this header be? Include "step 2" somehow, make step 2 template? -->
Multiple choice
{% endblock page_title %}


{% block breadcrumb_items %}
    {% if course_id %}
        <li class="breadcrumb-item"><a href="{% url 'course:index' %}">Courses</a></li>
        <li class="breadcrumb-item"><a href="#">{{ course.code }} - {{ course.name }}</a></li> <!-- TODO: Use course name -->
        <li class="breadcrumb-item">New task</li>
    {% endif %}

{% endblock breadcrumb_items %}


{% block search_bar %}
{% endblock search_bar %}


{% block button_row %}
<div class="custom-button" style="">
    <a href="{% url 'course:new' %}" style="display: inline-flex;">
        <div class="button-icon">
            <span class="iconify" data-icon="fluent:bin-recycle-24-regular" data-width="24" data-height="24" style="font-weight: bolder;"></span>
        </div>
        <div style="justify-content: flex-start; align-items: center; display: flex">
            <div class="button-text">Delete</div>
        </div>
    </a>
</div>
{% endblock button_row %}


{% block content %}

<div class="card w-100 mx-auto">
<div class="card-body"> <!-- TODO: Instead of card-body, add same padding as on other pages (e.g. image browser) -->

    <div class="w-100" style="padding-bottom: 12px;">
        <div class="progress " style="width: 25%; height: 32px; margin-left: auto;">
            <div class="progress-bar" role="progressbar" style="width: 66%; background-color: var(--color-blue-dark);">
                2/3 <!-- TODO: Update with current value for each step -->
            </div>
        </div>
    </div>

    <div style="padding: 6px 24px 6px 24px;">
        <h2>
            Multiple choice: Task information
        </h2>
        <h3 style="color: var(--color-blue-dark);">
            Fill in the descriptive fields of the task
        </h3>
    </div>

    <div class="card transparentBackground border-0 text-center">
    <div class="card-body">
    <div class="card-text">

    <form class="form" method="post">
        {% csrf_token %}
        {{ taskForm.management_form }}

        <table class="table" style="margin-left: auto; margin-right:auto; width: 90%;">

            <thead class="thead-light">
                <tr><th colspan="2">Multiple choice info</th></tr>
            </thead>
            <tr>
                <th>{{ taskForm.name.label }} (short, decriptive)</th>
                <td>{{ taskForm.name }}</td>
            </tr>
            <tr>
                <th>{{ multipleChoiceForm.question.label }}</th>
                <td>{{ multipleChoiceForm.question }}</td>
            </tr>
            <tr>
                <th>{{ multipleChoiceForm.instructions.label }}</th>
                <td>{{ multipleChoiceForm.instructions }}</td>
            </tr>


            <thead class="thead-light">
                <tr><th colspan="2">Answer alternatives (check box if alternative is correct)</th></tr>
            </thead>
            {{ choiceFormset.management_form }}
            {% for choiceForm in choiceFormset %}
                {{ choiceForm.id }} <!-- Need to explicitly render form id when not iterating through all fields -->
                <tr>
                    <td>{{ "Option" }}</td>
                    <td>{{ choiceForm.text }} {{ choiceForm.correct }}</td>
                </tr>
            {% endfor %}


            <thead class="thead-light">
                <tr><th colspan="2">Task metadata and tagging</th></tr>
            </thead>
            <tr>
                <th>{{ taskForm.pathology.label }}</th>
                <td>{{ taskForm.pathology }}</td>
            </tr>
            <tr>
                <th>{{ taskForm.organ_tags.label }}</th>
                <td>{{ taskForm.organ_tags }}</td>
            </tr>
            <tr>
                <th>{{ taskForm.other_tags.label }}</th>
                <td>{{ taskForm.other_tags }}</td>
            </tr>

            <thead class="thead-light">
                <tr><th colspan="2">Annotate WSI</th></tr>
            </thead>
            <tr><td colspan="2">
                {% include 'slide/view_wsi_and_edit_annotations.html' with slide=slide %}

                <br>
                <input type="submit" value="Submit">
            </td></tr>

        </table>

    </form>


    </div>
    </div>
    </div>

</div>
</div>
{% endblock content %}


{% block javascript %}

$(document).ready(function(){
    collapseSidebar();
});

{% endblock javascript %}
